webpackJsonp([29],{2140:function(e,t,r){var a=r(2)(r(2571),r(2572),function(e){r(2569)},null,null);e.exports=a.exports},2307:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n,o=c(r(600)),i=c(r(601)),s=(a=(0,i.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.default.HttpHelp.request({method:"GET",url:"/nl/afterSales/serviceCenterOrder/"+t}));case 1:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)}),l=(n=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.default.HttpHelp.request({method:"GET",url:"/nl/afterSales/serviceCenterOrder/all"}));case 1:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),d=c(r(3));function c(e){return e&&e.__esModule?e:{default:e}}var u={filterServiceCenter:function(e,t){return d.default.HttpHelp.request({method:"POST",url:"/nl/afterSales/serviceCenterOrder/filter",data:{customer_id:t.customer_id,order_no:t.order_no,root_category_id:t.root_category_id},params:{page:e,size:10}})},postServiceCenter:function(e){return d.default.HttpHelp.request({method:"POST",url:"/nl/afterSales/serviceCenterOrder",data:e})},getServiceCenter:s,deleteServiceCenter:function(e){return d.default.HttpHelp.request({method:"DELETE",url:"/nl/afterSales/serviceCenterOrder/"+e})},bulkServiceCenterDetail:function(e){return d.default.HttpHelp.request({method:"POST",url:"/nl/afterSales/serviceCenterOrderDetail/bulk",data:e})},getServiceCenterDetail:function(e){return d.default.HttpHelp.request({method:"POST",url:"/nl/afterSales/serviceCenterOrderDetail/filter",data:{service_center_order_no:e},params:{page:1,size:999}})},getAllServiceCenter:l,getDetailBySN:function(e){return d.default.HttpHelp.request({method:"GET",url:"/object/detail-by-sn",data:e})}};t.default=u},2331:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(3),o=(a=n)&&a.__esModule?a:{default:a};var i={filterCustomerServiceRecord:function(e,t){return o.default.HttpHelp.request({method:"POST",url:"/nl/afterSales/customerServiceRecord/filter",data:{customer_id:t.customer_id,service_no:t.service_no},params:{page:e,size:10}})},postCustomerServiceRecord:function(e){return o.default.HttpHelp.request({method:"POST",url:"/nl/afterSales/customerServiceRecord",data:e})},getCustomerServiceRecord:function(e){return o.default.HttpHelp.request({method:"GET",url:"/nl/afterSales/customerServiceRecord/"+e})},deleteCustomerServiceRecord:function(e){return o.default.HttpHelp.request({method:"DELETE",url:"/nl/afterSales/customerServiceRecord/"+e})},changeCSRecordStatus:function(e,t){return o.default.HttpHelp.request({method:"put",url:"/nl/afterSales/customerServiceRecord/"+e+"/status",params:{status:t}})}};t.default=i},2569:function(e,t,r){var a=r(2570);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(2089)("181a4415",a,!0,{})},2570:function(e,t,r){(e.exports=r(2088)(!0)).push([e.i,".CS-record-save{width:100%;height:100%}.CS-record-save span.required{color:#e26829;display:inline-block}.CS-record-save .content{border:1px solid #2b2f3b}.CS-record-save .content .order-info{width:100%}.CS-record-save .content .order-info .title{height:50px;line-height:50px;padding-left:40px}.CS-record-save .content .order-info .left{float:left;width:100%;background:#353945;-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b;border-bottom:1px solid #2b2f3b}.CS-record-save .content .order-info .left .item{line-height:60px;overflow:hidden;width:49%;height:50px;display:inline-block}.CS-record-save .content .order-info .left .item .label{display:inline-block;width:147px;margin-left:15px}.CS-record-save .content .order-info .left .item .input{margin-left:10px;width:256px;border-radius:0 0 10px 10px}.CS-record-save .content .order-info .left .item .input-left{margin-left:10px;width:200px}.CS-record-save .content .order-info .left .item .input-right{width:200px}.CS-record-save .content .order-info .left .item .input-note{margin-left:10px;width:608px}.CS-record-save .content .order-info .left .item-row{width:100%;padding-top:15px}.CS-record-save .content .order-info .left .item-row label{margin-left:15px}.CS-record-save .content .order-info .left .item-row .text-area{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around;width:100%;margin:10px 0;padding:5px 15px}.CS-record-save .content .order-info .left .item-row .text-area .el-upload--text{display:-webkit-box;display:-ms-flexbox;display:flex}.CS-record-save .content .parts-list{text-align:right;padding:0 40px;font-size:12px;overflow:hidden;height:50px;line-height:50px;width:100%;-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b}.CS-record-save .content .parts-list .att-btn{padding:6px 9px;min-width:0;margin:11px auto;display:block}","",{version:3,sources:["C:/Users/dd/Desktop/besst-build/clientBESST/src/views/nl/after-sales/service-center/customer-service-record-save.vue"],names:[],mappings:"AACA,gBACE,WAAY,AACZ,WAAa,CACd,AACD,8BACI,cAAe,AACf,oBAAsB,CACzB,AACD,yBACI,wBAA0B,CAC7B,AACD,qCACM,UAAY,CACjB,AACD,4CACQ,YAAa,AACb,iBAAkB,AAClB,iBAAmB,CAC1B,AACD,2CACQ,WAAY,AACZ,WAAY,AACZ,mBAAoB,AACpB,kCAAmC,AAC3B,0BAA2B,AACnC,+BAAiC,CACxC,AACD,iDACU,iBAAkB,AAClB,gBAAiB,AACjB,UAAW,AACX,YAAa,AACb,oBAAsB,CAC/B,AACD,wDACY,qBAAsB,AACtB,YAAa,AACb,gBAAkB,CAC7B,AACD,wDACY,iBAAkB,AAClB,YAAa,AACb,2BAA6B,CACxC,AACD,6DACY,iBAAkB,AAClB,WAAa,CACxB,AACD,8DACY,WAAa,CACxB,AACD,6DACY,iBAAkB,AAClB,WAAa,CACxB,AACD,qDACU,WAAY,AACZ,gBAAkB,CAC3B,AACD,2DACY,gBAAkB,CAC7B,AACD,gEACY,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,yBAA0B,AACtB,6BAA8B,AAClC,WAAY,AACZ,cAAe,AACf,gBAAkB,CAC7B,AACD,iFACc,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CAC3B,AACD,qCACM,iBAAkB,AAClB,eAAgB,AAChB,eAAgB,AAChB,gBAAiB,AACjB,YAAa,AACb,iBAAkB,AAClB,WAAY,AACZ,kCAAmC,AAC3B,yBAA2B,CACxC,AACD,8CACQ,gBAAiB,AACjB,YAAa,AACb,iBAAkB,AAClB,aAAe,CACtB",file:"customer-service-record-save.vue",sourcesContent:["\n.CS-record-save {\n  width: 100%;\n  height: 100%;\n}\n.CS-record-save span.required {\n    color: #e26829;\n    display: inline-block;\n}\n.CS-record-save .content {\n    border: 1px solid #2b2f3b;\n}\n.CS-record-save .content .order-info {\n      width: 100%;\n}\n.CS-record-save .content .order-info .title {\n        height: 50px;\n        line-height: 50px;\n        padding-left: 40px;\n}\n.CS-record-save .content .order-info .left {\n        float: left;\n        width: 100%;\n        background: #353945;\n        -webkit-box-shadow: 0 -1px #2b2f3b;\n                box-shadow: 0 -1px #2b2f3b;\n        border-bottom: 1px solid #2b2f3b;\n}\n.CS-record-save .content .order-info .left .item {\n          line-height: 60px;\n          overflow: hidden;\n          width: 49%;\n          height: 50px;\n          display: inline-block;\n}\n.CS-record-save .content .order-info .left .item .label {\n            display: inline-block;\n            width: 147px;\n            margin-left: 15px;\n}\n.CS-record-save .content .order-info .left .item .input {\n            margin-left: 10px;\n            width: 256px;\n            border-radius: 0 0 10px 10px;\n}\n.CS-record-save .content .order-info .left .item .input-left {\n            margin-left: 10px;\n            width: 200px;\n}\n.CS-record-save .content .order-info .left .item .input-right {\n            width: 200px;\n}\n.CS-record-save .content .order-info .left .item .input-note {\n            margin-left: 10px;\n            width: 608px;\n}\n.CS-record-save .content .order-info .left .item-row {\n          width: 100%;\n          padding-top: 15px;\n}\n.CS-record-save .content .order-info .left .item-row label {\n            margin-left: 15px;\n}\n.CS-record-save .content .order-info .left .item-row .text-area {\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-box-align: center;\n                -ms-flex-align: center;\n                    align-items: center;\n            -ms-flex-pack: distribute;\n                justify-content: space-around;\n            width: 100%;\n            margin: 10px 0;\n            padding: 5px 15px;\n}\n.CS-record-save .content .order-info .left .item-row .text-area .el-upload--text {\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n}\n.CS-record-save .content .parts-list {\n      text-align: right;\n      padding: 0 40px;\n      font-size: 12px;\n      overflow: hidden;\n      height: 50px;\n      line-height: 50px;\n      width: 100%;\n      -webkit-box-shadow: 0 -1px #2b2f3b;\n              box-shadow: 0 -1px #2b2f3b;\n}\n.CS-record-save .content .parts-list .att-btn {\n        padding: 6px 9px;\n        min-width: 0;\n        margin: 11px auto;\n        display: block;\n}\n"],sourceRoot:""}])},2571:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(r(600)),n=f(r(18)),o=f(r(601)),i=f(r(3)),s=f(r(2331)),l=f(r(602)),d=f(r(2307)),c=f(r(5)),u=f(r(6)),A=f(r(7)),p=f(r(8));function f(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{loading:!1,formData:{customer_id:"",sales_order_no:"",service_no:"",service_type:"",status:0},orderId:0,customerList:[],typeArr:[{id:1,label:"inspection"},{id:2,label:"repair"},{id:3,label:"replacement"}],headData:[],categoryList:[]}},i18n:{messages:{en:c.default.Component.Order.Save,zh:u.default.Component.Order.Save,de:A.default.Component.Order.Save,nl:p.default.Component.Order.Save}},computed:{},created:function(){var e=(0,o.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.headData=["Item Name","BF Art No.","SN","Error Code","Damage Count","Production Date"],t=this,this.loading=!0,e.next=5,l.default.getAllCustomer().then(function(e){if(-2===e.data.code)throw e.data.message;t.customerList=e.data,t.loading=!1}).catch(function(e){t.$message({message:e,type:"error"}),t.loading=!1});case 5:this.loading=!0,this.orderId=this.$route.query.orderId,this.orderId&&(this.loading=!0,s.default.getCustomerServiceRecord(this.orderId).then(function(e){if(-2===e.data.code)throw e.data.message;return t.formData=JSON.parse((0,n.default)(e.data)),d.default.getServiceCenterDetail(e.data.service_no)}).then(function(e){if(-2===e.data.code)throw e.data.message;t.categoryList=e.data.content.map(function(e){return e.production_date=e.production_date&&1e3*e.production_date||new Date,e}),t.loading=!1}).catch(function(e){t.$message({message:e,type:"error"}),t.loading=!1}));case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){},methods:{goCSRecord:function(){this.$router.push({name:"customerServiceRecord"})},createOrder:function(){var e=this,t=this;this.loading=!0;var r=this.categoryList.map(function(e){return e.production_date=i.default.Util.parseDate(e.production_date),e});d.default.bulkServiceCenterDetail(r).then(function(r){if(-2===r.data.code)throw r.data.message;t.$message({message:"Save Successfully",type:"success"}),t.loading=!1,e.$router.go(-1)}).catch(function(e){t.$message({message:e,type:"error"}),t.loading=!1})}}}},2572:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"CS-record-save"},[r("div",{staticClass:"header"},[r("div",{staticClass:"btn-group-inline"},[r("div",{staticClass:"icons"},[r("div",{staticClass:"icon-item back",attrs:{title:"back"},on:{click:e.goCSRecord}})])]),e._v(" "),r("label",{staticClass:"title"},[e._v("Edit Customer Service Record")])]),e._v(" "),r("div",{staticClass:"content-wrap"},[r("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"content"},[r("div",{staticClass:"order-info"},[r("label",{staticClass:"title"},[e._v("Customer Info")]),e._v(" "),r("div",{staticClass:"left"},[r("div",{staticClass:"item"},[r("label",{staticClass:"label"},[e._v("Customer")]),e._v(" "),r("el-select",{staticClass:"input",attrs:{slot:"prepend",filterable:"",disabled:""},slot:"prepend",model:{value:e.formData.customer_id,callback:function(t){e.$set(e.formData,"customer_id",t)},expression:"formData.customer_id"}},e._l(e.customerList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("div",{staticClass:"item"},[r("label",{staticClass:"label"},[e._v("Sales Order")]),e._v(" "),r("el-input",{staticClass:"input",attrs:{disabled:""},model:{value:e.formData.sales_order_no,callback:function(t){e.$set(e.formData,"sales_order_no",t)},expression:"formData.sales_order_no"}})],1),e._v(" "),r("div",{staticClass:"item"},[r("label",{staticClass:"label"},[e._v("Service No")]),e._v(" "),r("el-input",{staticClass:"input",attrs:{disabled:""},model:{value:e.formData.service_no,callback:function(t){e.$set(e.formData,"service_no",t)},expression:"formData.service_no"}})],1),e._v(" "),r("div",{staticClass:"item"},[r("label",{staticClass:"label"},[e._v("Service Type")]),e._v(" "),r("el-select",{staticClass:"input",attrs:{slot:"prepend",filterable:"",disabled:""},slot:"prepend",model:{value:e.formData.service_type,callback:function(t){e.$set(e.formData,"service_type",t)},expression:"formData.service_type"}},e._l(e.typeArr,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}))],1)])]),e._v(" "),e.categoryList.length>0?r("div",{staticClass:"table-wrap table-overflow"},[r("table",{staticClass:"table-content",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[r("thead",e._l(e.headData,function(t,a){return r("td",{key:a},[e._v(e._s(t))])})),e._v(" "),r("tbody",e._l(e.categoryList,function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(e._f("categoryRoot")(t.category_root_id)))]),e._v(" "),r("td",[e._v(e._s(t.bf_art_no))]),e._v(" "),r("td",[r("el-input",{staticClass:"input",attrs:{placeholder:"SN",disabled:e.formData.status>0},model:{value:t.sn,callback:function(r){e.$set(t,"sn",r)},expression:"item.sn"}})],1),e._v(" "),r("td",[r("el-input",{staticClass:"input",attrs:{placeholder:"Error Code",disabled:e.formData.status>0},model:{value:t.error_code,callback:function(r){e.$set(t,"error_code",r)},expression:"item.error_code"}})],1),e._v(" "),r("td",[r("el-input",{staticClass:"number",attrs:{type:"number",placeholder:"Damage Count",disabled:e.formData.status>0},model:{value:t.damage_count,callback:function(r){e.$set(t,"damage_count",r)},expression:"item.damage_count"}})],1),e._v(" "),r("td",[r("el-date-picker",{staticClass:"input",attrs:{type:"date",placeholder:"Date",disabled:e.formData.status>0},model:{value:t.production_date,callback:function(r){e.$set(t,"production_date",r)},expression:"item.production_date"}})],1)])}))])]):e._e(),e._v(" "),0===e.formData.status?r("div",{staticClass:"parts-list"},[r("el-button",{attrs:{type:"primary"},on:{click:e.createOrder}},[e._v("SAVE")])],1):e._e()])])])},staticRenderFns:[]}}});
//# sourceMappingURL=29.20ec9de510031c4d044f.js.map