webpackJsonp([27],{2127:function(e,t,n){var a=n(2)(n(2514),n(2515),function(e){n(2512)},null,null);e.exports=a.exports},2167:function(e,t,n){(function(n){var a,r,i;r=[],void 0===(i="function"==typeof(a=function(){"use strict";function t(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){o(a.response,t,n)},a.onerror=function(){console.error("could not download file")},a.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,o=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(e,n,o){var s=i.URL||i.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?r(l):a(l.href)?t(e,n,o):r(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){r(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(a(e))t(e,n,i);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){r(o)})}}:function(e,n,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,a);var o="application/octet-stream"===e.type,s=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&s)&&"object"==typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},d.readAsDataURL(e)}else{var u=i.URL||i.webkitURL,c=u.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){u.revokeObjectURL(c)},4e4)}});i.saveAs=o.saveAs=o,void 0!==e&&(e.exports=o)})?a.apply(t,r):a)||(e.exports=i)}).call(t,n(54))},2310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=l(n(600)),i=l(n(601)),o=(a=(0,i.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.default.HttpHelp.request({method:"GET",url:"/nl/nlPublic/supplier/all"}));case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)}),s=l(n(3));function l(e){return e&&e.__esModule?e:{default:e}}var d={getAllSupplier:o,getPurchase:function(e){return s.default.HttpHelp.request({method:"POST",url:"/nl/order/purchase/filter",data:{purchase_order_no:e,status:1}})},filterAllPurchaseDetails:function(e){return s.default.HttpHelp.request({method:"POST",url:"/nl/order/purchase/detail/filter",data:{purchase_order_id:e},params:{page:1,size:999}})},getPurchaseByid:function(e){return s.default.HttpHelp.request({method:"GET",url:"/nl/order/purchase/"+e})},printPurchase:function(e){return s.default.HttpHelp.request({method:"Get",url:"/nl/order/purchase/"+e+"/print",responseType:"blob"})}};t.default=d},2512:function(e,t,n){var a=n(2513);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(2089)("30936c0e",a,!0,{})},2513:function(e,t,n){(e.exports=n(2088)(!0)).push([e.i,".purchase-details{width:100%;height:100%}.purchase-details span.required{color:#e26829;display:inline-block}.purchase-details .el-form-item{margin-right:2px!important;margin-bottom:0}.purchase-details .el-form-item__label{color:#fff;width:83px;text-align:left;margin-left:5px}.purchase-details .el-form-item__content{width:180px!important}.purchase-details .content{border:1px solid #2b2f3b;width:1080px;margin:20px auto 0}.purchase-details .content .order-info{width:100%}.purchase-details .content .order-info .title{height:50px;line-height:50px;padding-left:40px}.purchase-details .content .order-info .left{float:left;width:100%;height:175px;background:#353945;-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b;border-bottom:1px solid #2b2f3b}.purchase-details .content .order-info .left .item{line-height:60px;overflow:hidden;width:49%;height:50px;display:inline-block}.purchase-details .content .order-info .left .item .label{display:inline-block;width:110px;margin-left:15px}.purchase-details .content .order-info .left .item .input{margin-left:10px;width:256px;border-radius:0 0 10px 10px}.purchase-details .content .order-info .left .item span{display:inline-block}","",{version:3,sources:["C:/Users/dd/Desktop/besst-build/clientBESST/src/views/nl/purchase/purchase-list-details.vue"],names:[],mappings:"AACA,kBACE,WAAY,AACZ,WAAa,CACd,AACD,gCACI,cAAe,AACf,oBAAsB,CACzB,AACD,gCACI,2BAA6B,AAC7B,eAAiB,CACpB,AACD,uCACI,WAAY,AACZ,WAAY,AACZ,gBAAiB,AACjB,eAAiB,CACpB,AACD,yCACI,qBAAwB,CAC3B,AACD,2BACI,yBAA0B,AAC1B,aAAc,AACd,kBAAyB,CAC5B,AACD,uCACM,UAAY,CACjB,AACD,8CACQ,YAAa,AACb,iBAAkB,AAClB,iBAAmB,CAC1B,AACD,6CACQ,WAAY,AACZ,WAAY,AACZ,aAAc,AACd,mBAAoB,AACpB,kCAAmC,AAC3B,0BAA2B,AACnC,+BAAiC,CACxC,AACD,mDACU,iBAAkB,AAClB,gBAAiB,AACjB,UAAW,AACX,YAAa,AACb,oBAAsB,CAC/B,AACD,0DACY,qBAAsB,AACtB,YAAa,AACb,gBAAkB,CAC7B,AACD,0DACY,iBAAkB,AAClB,YAAa,AACb,2BAA6B,CACxC,AACD,wDACY,oBAAsB,CACjC",file:"purchase-list-details.vue",sourcesContent:["\n.purchase-details {\n  width: 100%;\n  height: 100%;\n}\n.purchase-details span.required {\n    color: #e26829;\n    display: inline-block;\n}\n.purchase-details .el-form-item {\n    margin-right: 2px !important;\n    margin-bottom: 0;\n}\n.purchase-details .el-form-item__label {\n    color: #fff;\n    width: 83px;\n    text-align: left;\n    margin-left: 5px;\n}\n.purchase-details .el-form-item__content {\n    width: 180px !important;\n}\n.purchase-details .content {\n    border: 1px solid #2b2f3b;\n    width: 1080px;\n    margin: 20px auto 0 auto;\n}\n.purchase-details .content .order-info {\n      width: 100%;\n}\n.purchase-details .content .order-info .title {\n        height: 50px;\n        line-height: 50px;\n        padding-left: 40px;\n}\n.purchase-details .content .order-info .left {\n        float: left;\n        width: 100%;\n        height: 175px;\n        background: #353945;\n        -webkit-box-shadow: 0 -1px #2b2f3b;\n                box-shadow: 0 -1px #2b2f3b;\n        border-bottom: 1px solid #2b2f3b;\n}\n.purchase-details .content .order-info .left .item {\n          line-height: 60px;\n          overflow: hidden;\n          width: 49%;\n          height: 50px;\n          display: inline-block;\n}\n.purchase-details .content .order-info .left .item .label {\n            display: inline-block;\n            width: 110px;\n            margin-left: 15px;\n}\n.purchase-details .content .order-info .left .item .input {\n            margin-left: 10px;\n            width: 256px;\n            border-radius: 0 0 10px 10px;\n}\n.purchase-details .content .order-info .left .item span {\n            display: inline-block;\n}\n"],sourceRoot:""}])},2514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(18)),r=c(n(3)),i=c(n(6)),o=c(n(5)),s=c(n(7)),l=c(n(8)),d=c(n(2310)),u=c(n(2167));function c(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{loading:!1,headData:[],orderId:0,formData:{date:"",supplier_id:"",purchase_type:"",create_user_id:"",purchase_order_no:""},orderItems:[],purpose:[{id:0,name:"Warehouse stocking"},{id:1,name:"Sales purchase"},{id:2,name:"After-sales procurement"}],supplierData:[]}},i18n:{messages:{en:o.default.Component.Order.Save,zh:i.default.Component.Order.Save,de:s.default.Component.Order.Save,nl:l.default.Component.Order.Save}},created:function(){},computed:{},mounted:function(){this.headData=["Item Name","BF Art Nr.","Specification","Quantity"];var e=this;e.orderId=this.$route.query.orderId,e.loading=!0,e.getPurchaseById(e.orderId).then(function(t){e.formData=JSON.parse((0,a.default)(t))}).then(function(){return e.filterPurchaseDetails(e.orderId)}).then(function(t){e.orderItems=t.content.map(function(e){return e.item_part_no=e.item_code,e})}).then(function(){return e.getSupplier()}).then(function(t){e.loading=!1,e.supplierData=t}).catch(function(t){e.$message({message:t.message,type:"error"}),e.loading=!1})},methods:{goPurchaseList:function(){this.$router.push({name:"purchaseList"})},getPurchaseById:function(e){return r.default.Api.request({method:"GET",url:"/nl/order/purchase/"+e})},bulkPurchaseDetails:function(e){return r.default.Api.request({method:"POST",url:"/nl/order/purchase/detail/bulk",data:e})},postPurchase:function(e){return r.default.Api.request({method:"POST",url:"/nl/order/purchase",data:e})},getSupplier:function(){return r.default.Api.request({method:"GET",url:"/nl/nlPublic/supplier/all"})},filterPurchaseDetails:function(e){return r.default.Api.request({method:"POST",url:"/nl/order/purchase/detail/filter",data:{purchase_order_id:e},params:{page:1,size:999}})},changeDate:function(e){return r.default.Util.changeDateForm(1e3*e)},conversionSupplier:function(e){if(this.supplierData.length>0){var t=this.supplierData.filter(function(t){return t.id===e});return t.length>0?t[0].company_name:"--"}},conversionPurpose:function(e){if(this.purpose.length>0){var t=this.purpose.filter(function(t){return t.id===e});if(t.length>0)return t[0].name}},onPrint:function(){var e=this;d.default.printPurchase(this.orderId).then(function(t){var n=new Date,a=n.getFullYear()+"-"+n.getMonth()+"-"+n.getDay(),r=e.formData.purchase_order_no||a,i=new Blob([t.data],{type:"text/html;charset=utf-8"});(0,u.default)(i,r+".html")})}},watch:{}}},2515:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"purchase-details"},[n("div",{staticClass:"header"},[n("div",{staticClass:"btn-group-inline"},[n("div",{staticClass:"icons"},[n("div",{staticClass:"icon-item back",attrs:{title:"back"},on:{click:e.goPurchaseList}})])]),e._v(" "),n("div",{staticClass:"btn-group-top"},[n("div",{staticClass:"icons"},[n("div",{staticClass:"icon-item print",attrs:{title:"print"},on:{click:e.onPrint}})])]),e._v(" "),n("label",{staticClass:"title"},[e._v("Purchase List Details")])]),e._v(" "),n("div",{staticClass:"content-wrap"},[n("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"content"},[n("div",{staticClass:"order-info"},[n("label",{staticClass:"title"},[e._v("Purchase Order")]),e._v(" "),n("div",{staticClass:"left"},[n("div",{staticClass:"item"},[n("label",{staticClass:"label"},[e._v("Object")]),e._v(" "),n("span",[e._v(e._s(e.conversionSupplier(e.formData.supplier_id)))])]),e._v(" "),n("div",{staticClass:"item"},[n("label",{staticClass:"label"},[e._v("Order No.")]),e._v(" "),n("span",[e._v(e._s(e.formData.purchase_order_no))])]),e._v(" "),n("div",{staticClass:"item"},[n("label",{staticClass:"label"},[e._v("Purpose")]),e._v(" "),n("span",[e._v(e._s(e.conversionPurpose(e.formData.purchase_type)))])]),e._v(" "),n("div",{staticClass:"item"},[n("label",{staticClass:"label"},[e._v("Creater")]),e._v(" "),n("span",[e._v(e._s(e.formData.create_user_id))])]),e._v(" "),n("div",{staticClass:"item"},[n("label",{staticClass:"label"},[e._v("Date")]),e._v(" "),n("span",[e._v(e._s(e.changeDate(e.formData.date)))])])])]),e._v(" "),n("div",{staticClass:"table-wrap"},[n("table",{staticClass:"table-content",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[n("thead",e._l(e.headData,function(t){return n("td",[e._v(e._s(t))])})),e._v(" "),n("tbody",e._l(e.orderItems,function(t,a){return n("tr",[n("td",[e._v(e._s(e._f("categoryRoot")(t.category_root_id)))]),e._v(" "),n("td",[e._v(e._s(t.item_part_no))]),e._v(" "),n("td",[e._v(e._s(t.name||t.item_name))]),e._v(" "),n("td",[e._v(e._s(t.quantity))])])}))])])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=27.b90810ca91adb09585d3.js.map