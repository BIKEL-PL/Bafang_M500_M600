<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S32 SDK: 01. Mode handling</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top" style="height:auto; width:100%"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <img id="projectlogo" style="height:auto; width:100%" alt="Logo" src="s32sdk_logo_small.jpg"/>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__modeconfig.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">01. Mode handling<div class="ingroups"><a class="el" href="group__sbc__uja113x.html">System Basis Chip library (SBC) - UJA113x Family</a> &raquo; <a class="el" href="group__pcr.html">01. Primary control</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="mode_intro"></a>
Introduction</h1>
<p>The SBC has two debug modes, the Forced Normal Mode (FNMC) and Software Development mode (SDMC). These modes can be configured in the SBCs MTPNV memory and can be set using the <a class="el" href="group__mtpnvr.html#gad516dfc6d852db8395d2e7ff51bec810" title="Writes the non-volitile memory parameters (0x71 - 0x75) of SBC. ">UJA113X_SetMtpnv()</a> function. Be aware while writing the non-volatile memory, as these registers can't be rewritten again easily. Clearing the non-volatile memory requires special treatment, see <a class="el" href="group__mtpnvr.html#mtpnv_restore">Restoring MTPNV factory preset values</a> for details. These modes influence the watchdog behaviour and the main purpose is to use them during development, although is not limitted just for this use case.<br />
Aditionally, the SBC has 3 operating modes the user can switch to (the Normal, Standby and Sleep mode) with <a class="el" href="group__modeconfig.html#ga0e5f068425b4f6b87d8b5129a7e71767" title="Sets the mode control register (0x01) to get the SBC into a new mode. ">UJA113X_SetMode()</a>. </p>
<h2><a class="anchor" id="mode_sleep"></a>
Sleep mode</h2>
<p>To be able to switch to the Sleep mode, the MTPNV memory has to be set accordingly. In case the Sleep mode is disabled, the request to switch to Sleep mode is ignored.<br />
To enter the sleep mode, any pending interrupts or wake-up events need to be cleared and at least one regular wake-up source has to be enabled. Otherwise a system reset is triggered and the Reset Source Status bit (RSS) is set to 10100 (illegal Sleep mode command received). </p>
<h2><a class="anchor" id="mode_modes"></a>
Normal &amp; Standby mode</h2>
<p>There should be no limitation to switch into these two modes except constrains related to watchdog. As the watchdog can be still running, make sure to handle the watchdog properly, otherwise a reset can occur. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga8d6f363768a0488e1570208b9aa0c246"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modeconfig.html#ga8d6f363768a0488e1570208b9aa0c246">uja113x_mc_mc_t</a> { <a class="el" href="group__modeconfig.html#gga8d6f363768a0488e1570208b9aa0c246ac4bcf8c7d9e79176911ed233a33506d6">MC_SLEEP</a> = 0x01U, 
<a class="el" href="group__modeconfig.html#gga8d6f363768a0488e1570208b9aa0c246a9e47a8e870e093f160a83b0d7015b006">MC_STANDBY</a> = 0x04U, 
<a class="el" href="group__modeconfig.html#gga8d6f363768a0488e1570208b9aa0c246a6d4634ccec4f8e9193fc5db99abd8fe4">MC_NORMAL</a> = 0x07U
 }<tr class="memdesc:ga8d6f363768a0488e1570208b9aa0c246"><td class="mdescLeft">&#160;</td><td class="mdescRight">SBC mode configuration options (0x01:MC[2:0])  <a href="group__modeconfig.html#ga8d6f363768a0488e1570208b9aa0c246">More...</a><br /></td></tr>
<tr class="separator:ga8d6f363768a0488e1570208b9aa0c246"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0e5f068425b4f6b87d8b5129a7e71767"><td class="memItemLeft" align="right" valign="top"><a class="el" href="status_8h.html#af9bff8ff1154a04a899276af806b8586">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modeconfig.html#ga0e5f068425b4f6b87d8b5129a7e71767">UJA113X_SetMode</a> (uint32_t instance, <a class="el" href="group__modeconfig.html#ga8d6f363768a0488e1570208b9aa0c246">uja113x_mc_mc_t</a> modeConfig)</td></tr>
<tr class="memdesc:ga0e5f068425b4f6b87d8b5129a7e71767"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the mode control register (0x01) to get the SBC into a new mode.  <a href="#ga0e5f068425b4f6b87d8b5129a7e71767">More...</a><br /></td></tr>
<tr class="separator:ga0e5f068425b4f6b87d8b5129a7e71767"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga8d6f363768a0488e1570208b9aa0c246"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__modeconfig.html#ga8d6f363768a0488e1570208b9aa0c246">uja113x_mc_mc_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SBC mode configuration options (0x01:MC[2:0]) </p>
<p>Implements : uja113x_mc_mc_t_Class </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga8d6f363768a0488e1570208b9aa0c246ac4bcf8c7d9e79176911ed233a33506d6"></a>MC_SLEEP&#160;</td><td class="fielddoc">
<p>Set SBC mode to Sleep. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga8d6f363768a0488e1570208b9aa0c246a9e47a8e870e093f160a83b0d7015b006"></a>MC_STANDBY&#160;</td><td class="fielddoc">
<p>Set SBC mode to Standby. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga8d6f363768a0488e1570208b9aa0c246a6d4634ccec4f8e9193fc5db99abd8fe4"></a>MC_NORMAL&#160;</td><td class="fielddoc">
<p>Set SBC mode to Normal. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="sbc__uja113x_8h_source.html#l00257">257</a> of file <a class="el" href="sbc__uja113x_8h_source.html">sbc_uja113x.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga0e5f068425b4f6b87d8b5129a7e71767"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="status_8h.html#af9bff8ff1154a04a899276af806b8586">status_t</a> UJA113X_SetMode </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__modeconfig.html#ga8d6f363768a0488e1570208b9aa0c246">uja113x_mc_mc_t</a>&#160;</td>
          <td class="paramname"><em>modeConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the mode control register (0x01) to get the SBC into a new mode. </p>
<p>The function prepares a frame based on input parameter and initiates SPI communication in blocking mode. On successful transmission the first byte is verified. In case of a mismatch the watchdog register has not been written and the process has to be repeated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Index of SBC to configure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">modeConfig</td><td>New mode</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>STATUS_SUCCESS Configuration successful STATUS_BUSY SPI peripheral is busy STATUS_TIMEOUT SPI communication timed out, configuration aborted SBC_CMD_ERROR First received byte doesn't match the repeated address, configuration failed.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The SBC can be set into three modes (Normal, Standby, Sleep) based on the input parameter. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Entering the Normal or Standby mode requires no special treatment. However entering a Sleep mode requires to clear all pending interrupts/events (which would set the SBCs INTN1/INTN2 to high) and at least one wake-up source to be enabled. Otherwise the SBC can get stuck at Sleep mode without a possibility to wake it up! </dd></dl>

<p>Definition at line <a class="el" href="sbc__uja113x_8c_source.html#l00411">411</a> of file <a class="el" href="sbc__uja113x_8c_source.html">sbc_uja113x.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jun 11 2021 08:16:08 for S32 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
