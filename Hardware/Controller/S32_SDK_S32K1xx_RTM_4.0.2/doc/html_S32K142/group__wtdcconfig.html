<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S32 SDK: 02. Watchdog</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top" style="height:auto; width:100%"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <img id="projectlogo" style="height:auto; width:100%" alt="Logo" src="s32sdk_logo_small.jpg"/>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__wtdcconfig.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">02. Watchdog<div class="ingroups"><a class="el" href="group__sbc__uja113x.html">System Basis Chip library (SBC) - UJA113x Family</a> &raquo; <a class="el" href="group__pcr.html">01. Primary control</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="wtdc_intro"></a>
Introduction</h1>
<p>The watchdog behaviour can be influenced by the debug modes (see mode <a class="el" href="group__modeconfig.html#mode_intro">Introduction</a> for details) in combination with the watchdog mode (window, timeout or autonomous mode). The watchdog period is adjustable ranging from 8 ms to 4094 ms. </p>
<h2><a class="anchor" id="wtdc_fnmc"></a>
Watchdog in FNMC</h2>
<p>In Forced Normal Mode the Watchdog is completely disabled. Thus, configuring the watchdog mode has no influence on it's operation! </p>
<h2><a class="anchor" id="wtdc_sdmc"></a>
Watchdog in SDMC</h2>
<p>In Software Development Mode the watchdog can be activated or disabled based on configured watchdog mode. In case the timeout or window mode is selected, the watchdog is active independet from SDMC. For autonomous mode, the watchdog is active (only timeout mode) while SDMC = 0. For SDMC = 1, the watchdog stays inactive in autonomous mode!</p>
<p>Following table summarizes all the use cases.</p>
<table class="doxtable">
<caption align="bottom">Summary of Watchdog settings</caption>
<tr>
<th>SBC state  </th><th colspan="4">Watchdog Configurations  </th></tr>
<tr>
<th></th><th>SDMC = x </th><th>SDMC = x </th><th>SDMC = 0 </th><th>SDMC = 1 </th></tr>
<tr>
<th></th><th>WMC = 100<br />
(Window) </th><th>WMC = 010<br />
(Timeout) </th><th>WMC = 001<br />
(Autonomous) </th><th>WMC = 001<br />
(Autonomous </th></tr>
<tr>
<th>Normal mode  </th><td>Window  </td><td>Timeout </td><td>Timeout </td><td>Off </td></tr>
<tr>
<th>Standby mode (INTN1 HIGH) </th><td>Timeout </td><td>Timeout </td><td>Off  </td><td>Off </td></tr>
<tr>
<th>Standby mode (INTN1 LOW)  </th><td>Timeout </td><td>Timeout </td><td>Timeout </td><td>Off </td></tr>
<tr>
<th>Sleep mode  </th><td>Timeout </td><td>Timeout </td><td>Off  </td><td>Off </td></tr>
<tr>
<th>Forced Normal mode  </th><td>Off  </td><td>Off  </td><td>Off  </td><td>Off </td></tr>
<tr>
<th>Other modes  </th><td>Off  </td><td>Off  </td><td>Off  </td><td>Off </td></tr>
</table>
<h2><a class="anchor" id="wtdc_config"></a>
Watchdog mode configuration</h2>
<p>The watchdog mode can be reconfigured only in Standby mode using the <a class="el" href="group__wtdcconfig.html#gac717e41dbab08cd2c217922726f7de1c" title="Sets the watchdog register (0x00) based on input configuration object. ">UJA113X_SetWatchdog()</a>. Writes leading to change the watchdog mode in other modes than Standby would cause a switch to reset mode and reset source status (RSS) bit will be set to 10000 (illegal watchdog mode control access).</p>
<p>From this perspective it's the users responsibility to switch the SBC into Standby mode prior to watchdog mode update. </p>
<h2><a class="anchor" id="wtdc_trig"></a>
Watchdog trigger</h2>
<p>To reset the watchdog timer a successful write into the watchdog control register has to be performed. The <a class="el" href="group__wtdcconfig.html#gac717e41dbab08cd2c217922726f7de1c" title="Sets the watchdog register (0x00) based on input configuration object. ">UJA113X_SetWatchdog()</a> function can be used. If a new mode/period have changed as a result of the write access, the new values are valid immediately.</p>
<dl class="section warning"><dt>Warning</dt><dd>Writing a different mode while resetting the watchdog timer can cause a reset in case the SBC is not in Standby mode.</dd>
<dd>
Writing a different period while resetting the watchdog timer can result in reset as a consequence of a watchdog counter overflow due to period change. </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structuja113x__wtdc__cfg__t.html">uja113x_wtdc_cfg_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Watchdog register configuration structure (reg 0x00)  <a href="structuja113x__wtdc__cfg__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gae013e399bed8ea1ef14ee38938374c42"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wtdcconfig.html#gae013e399bed8ea1ef14ee38938374c42">uja113x_wtdc_wmc_t</a> { <a class="el" href="group__wtdcconfig.html#ggae013e399bed8ea1ef14ee38938374c42acfbb462d1ea974e7765cacbbc06c5f0b">WMC_AUTONOMOUS</a> = 0x20U, 
<a class="el" href="group__wtdcconfig.html#ggae013e399bed8ea1ef14ee38938374c42a258636be6c9aa28d418377f8876fba89">WMC_TIMEOUT</a> = 0x40U, 
<a class="el" href="group__wtdcconfig.html#ggae013e399bed8ea1ef14ee38938374c42aeff3b135615e2d3db6877ea431ed860b">WMC_WINDOW</a> = 0x80U
 }<tr class="memdesc:gae013e399bed8ea1ef14ee38938374c42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Watchdog mode configuration options (0x00:WMC[7:5])  <a href="group__wtdcconfig.html#gae013e399bed8ea1ef14ee38938374c42">More...</a><br /></td></tr>
<tr class="separator:gae013e399bed8ea1ef14ee38938374c42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
<tr class="memitem:gae5774ac1cfb1198a0ce337b5d76801b8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wtdcconfig.html#gae5774ac1cfb1198a0ce337b5d76801b8">uja113x_wtdc_nwp_t</a> { <br />
&#160;&#160;<a class="el" href="group__wtdcconfig.html#ggae5774ac1cfb1198a0ce337b5d76801b8a6bb38d71a6178221fdeda01668120f72">NWP_PERIOD_8</a> = 0x08U, 
<a class="el" href="group__wtdcconfig.html#ggae5774ac1cfb1198a0ce337b5d76801b8a294d2e00525751e802f41cacf587fc1a">NWP_PERIOD_16</a> = 0x01U, 
<a class="el" href="group__wtdcconfig.html#ggae5774ac1cfb1198a0ce337b5d76801b8ada45708e7dac85ff3cdd0abdf5ce9a39">NWP_PERIOD_32</a> = 0x02U, 
<a class="el" href="group__wtdcconfig.html#ggae5774ac1cfb1198a0ce337b5d76801b8afa50de23914f4079dd26489723ff845d">NWP_PERIOD_64</a> = 0x0BU, 
<br />
&#160;&#160;<a class="el" href="group__wtdcconfig.html#ggae5774ac1cfb1198a0ce337b5d76801b8a0b8b728ac26780da6c7cdaa79dcc4d93">NWP_PERIOD_128</a> = 0x04U, 
<a class="el" href="group__wtdcconfig.html#ggae5774ac1cfb1198a0ce337b5d76801b8a135d826452ca7dbeaa1ddd47eb8f0bd4">NWP_PERIOD_256</a> = 0x0DU, 
<a class="el" href="group__wtdcconfig.html#ggae5774ac1cfb1198a0ce337b5d76801b8a828f93e77e2a8005aefed793c994e717">NWP_PERIOD_1024</a> = 0x0EU, 
<a class="el" href="group__wtdcconfig.html#ggae5774ac1cfb1198a0ce337b5d76801b8a83a53ae42996d9c6ed2709993d7c5af7">NWP_PERIOD_4096</a> = 0x07U
<br />
 }<tr class="memdesc:gae5774ac1cfb1198a0ce337b5d76801b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Watchdog nominal period configuration options (0x00:NWP[3:0])  <a href="group__wtdcconfig.html#gae5774ac1cfb1198a0ce337b5d76801b8">More...</a><br /></td></tr>
<tr class="separator:gae5774ac1cfb1198a0ce337b5d76801b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac717e41dbab08cd2c217922726f7de1c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="status_8h.html#af9bff8ff1154a04a899276af806b8586">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wtdcconfig.html#gac717e41dbab08cd2c217922726f7de1c">UJA113X_SetWatchdog</a> (uint32_t instance, const <a class="el" href="structuja113x__wtdc__cfg__t.html">uja113x_wtdc_cfg_t</a> *wtdcConfig)</td></tr>
<tr class="memdesc:gac717e41dbab08cd2c217922726f7de1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the watchdog register (0x00) based on input configuration object.  <a href="#gac717e41dbab08cd2c217922726f7de1c">More...</a><br /></td></tr>
<tr class="separator:gac717e41dbab08cd2c217922726f7de1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gae5774ac1cfb1198a0ce337b5d76801b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__wtdcconfig.html#gae5774ac1cfb1198a0ce337b5d76801b8">uja113x_wtdc_nwp_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Watchdog nominal period configuration options (0x00:NWP[3:0]) </p>
<p>Implements : uja113x_wtdc_nwp_t_Class </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggae5774ac1cfb1198a0ce337b5d76801b8a6bb38d71a6178221fdeda01668120f72"></a>NWP_PERIOD_8&#160;</td><td class="fielddoc">
<p>8 ms nominal period. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggae5774ac1cfb1198a0ce337b5d76801b8a294d2e00525751e802f41cacf587fc1a"></a>NWP_PERIOD_16&#160;</td><td class="fielddoc">
<p>16 ms nominal watchdog period. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggae5774ac1cfb1198a0ce337b5d76801b8ada45708e7dac85ff3cdd0abdf5ce9a39"></a>NWP_PERIOD_32&#160;</td><td class="fielddoc">
<p>32 ms nominal watchdog period. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggae5774ac1cfb1198a0ce337b5d76801b8afa50de23914f4079dd26489723ff845d"></a>NWP_PERIOD_64&#160;</td><td class="fielddoc">
<p>64 ms nominal watchdog period. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggae5774ac1cfb1198a0ce337b5d76801b8a0b8b728ac26780da6c7cdaa79dcc4d93"></a>NWP_PERIOD_128&#160;</td><td class="fielddoc">
<p>128 ms nominal watchdog period. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggae5774ac1cfb1198a0ce337b5d76801b8a135d826452ca7dbeaa1ddd47eb8f0bd4"></a>NWP_PERIOD_256&#160;</td><td class="fielddoc">
<p>256 ms nominal watchdog period. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggae5774ac1cfb1198a0ce337b5d76801b8a828f93e77e2a8005aefed793c994e717"></a>NWP_PERIOD_1024&#160;</td><td class="fielddoc">
<p>1024 ms nominal watchdog period. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggae5774ac1cfb1198a0ce337b5d76801b8a83a53ae42996d9c6ed2709993d7c5af7"></a>NWP_PERIOD_4096&#160;</td><td class="fielddoc">
<p>4096 ms nominal watchdog period. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="sbc__uja113x_8h_source.html#l00238">238</a> of file <a class="el" href="sbc__uja113x_8h_source.html">sbc_uja113x.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae013e399bed8ea1ef14ee38938374c42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__wtdcconfig.html#gae013e399bed8ea1ef14ee38938374c42">uja113x_wtdc_wmc_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Watchdog mode configuration options (0x00:WMC[7:5]) </p>
<p>Implements : uja113x_wtdc_wmc_t_Class </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggae013e399bed8ea1ef14ee38938374c42acfbb462d1ea974e7765cacbbc06c5f0b"></a>WMC_AUTONOMOUS&#160;</td><td class="fielddoc">
<p>Watchdog autonomous mode </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggae013e399bed8ea1ef14ee38938374c42a258636be6c9aa28d418377f8876fba89"></a>WMC_TIMEOUT&#160;</td><td class="fielddoc">
<p>Watchdog timeout mode. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggae013e399bed8ea1ef14ee38938374c42aeff3b135615e2d3db6877ea431ed860b"></a>WMC_WINDOW&#160;</td><td class="fielddoc">
<p>Watchdog window mode. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="sbc__uja113x_8h_source.html#l00224">224</a> of file <a class="el" href="sbc__uja113x_8h_source.html">sbc_uja113x.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac717e41dbab08cd2c217922726f7de1c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="status_8h.html#af9bff8ff1154a04a899276af806b8586">status_t</a> UJA113X_SetWatchdog </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structuja113x__wtdc__cfg__t.html">uja113x_wtdc_cfg_t</a> *&#160;</td>
          <td class="paramname"><em>wtdcConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the watchdog register (0x00) based on input configuration object. </p>
<p>The function prepares a frame based on input configuration object and initiates SPI communication in blocking mode. On successful transmission the first byte is verified. In case of a mismatch the watchdog register has not been written and the process has to be repeated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Index of SBC to configure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wtdcConfig</td><td>Watchdog configuration object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>STATUS_SUCCESS Configuration successful STATUS_BUSY SPI peripheral is busy STATUS_TIMEOUT SPI communication timed out, configuration aborted SBC_CMD_ERROR First received byte doesn't match the repeated address, configuration failed.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The watchdog mode can be re-configured in Standby mode only! Changing the watchdog mode in Normal mode will cause the UJA113x to switch to Reset mode and the reset source status bits (RSS) will be set to 10000 ( illegal watchdog mode control access). However writing the same values doesn't lead to SBC reset, but a watchdog trigger which clears the watchdog counter!</dd></dl>
<dl class="section note"><dt>Note</dt><dd>To reset the watchdog counter, a successful write into the watchdog control register (0x00) has to be performed. This function can be used to reset the counter, however keep in mind that updating mode in non-Standby modes leads to SBC reset!<br />
Although updating the watchdog period is allowed, SBC reset due to an overflow can happen after configuring a shorter period!</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__modeconfig.html#ga0e5f068425b4f6b87d8b5129a7e71767" title="Sets the mode control register (0x01) to get the SBC into a new mode. ">UJA113X_SetMode()</a> </dd></dl>

<p>Definition at line <a class="el" href="sbc__uja113x_8c_source.html#l00385">385</a> of file <a class="el" href="sbc__uja113x_8c_source.html">sbc_uja113x.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jun 11 2021 08:16:08 for S32 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
